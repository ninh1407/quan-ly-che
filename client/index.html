
<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Quản lý Chè</title>
    <meta name="theme-color" content="#8a5a2f" />
    <link rel="manifest" href="/manifest.webmanifest" />
    <link rel="apple-touch-icon" href="/icons/leaf-180.png" />
    <link rel="icon" href="/icons/leaf.svg" type="image/svg+xml" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Quản lý Chè" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700&family=Noto+Serif:wght@400;700&family=Cormorant+Garamond:wght@500;700&display=swap" rel="stylesheet">
    <style>
      html, body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
      [data-theme="wood"] h1 { font-family: 'Playfair Display', 'Noto Serif', serif; letter-spacing:.3px; }
      [data-theme="wood"] .hero-title { font-family: 'Cormorant Garamond', 'Playfair Display', serif; letter-spacing:.3px; }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <div id="boot-overlay" style="position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:#ffffff;z-index:99999;opacity:0;pointer-events:none;transition:opacity .2s">
      <div style="padding:16px 20px;border:1px solid #e5e7eb;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,.08);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:#111827">
        <div id="boot-msg">Đang tải ứng dụng…</div>
        <div style="margin-top:10px;text-align:right"><button id="boot-refresh" style="padding:8px 12px;border:1px solid #cbd5e1;border-radius:10px;background:#F1F5F9">Làm mới</button></div>
      </div>
    </div>
    <script type="module" src="/src/main.jsx"></script>
    <script>
      (function(){
        const overlay = document.getElementById('boot-overlay');
        const refresh = document.getElementById('boot-refresh');
        const msg = document.getElementById('boot-msg');
        let shown = false;
        function show(text){ if(!shown){ overlay.style.opacity = '1'; overlay.style.pointerEvents='auto'; msg.textContent = text || 'Đang tải ứng dụng…'; shown=true } }
        window.addEventListener('error', function(){ show('Lỗi tải ứng dụng. Thử làm mới cache.') })
        window.addEventListener('unhandledrejection', function(){ show('Lỗi tải ứng dụng. Thử làm mới cache.') })
        setTimeout(function(){ if(!document.getElementById('root').innerHTML.trim()){ show('Đang tải… Nếu lâu quá, hãy bấm Làm mới') } }, 2500)
        refresh.addEventListener('click', async function(){ try { if ('serviceWorker' in navigator) { const regs = await navigator.serviceWorker.getRegistrations(); for (const r of (regs||[])) await r.unregister() } if (window.caches && window.caches.keys) { const ks = await caches.keys(); for (const k of ks) await caches.delete(k) } } catch {} location.reload(true) })
      })();
    </script>
  </body>
</html>
